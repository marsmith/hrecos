!function(e){function n(n){for(var t,i,l=n[0],s=n[1],c=n[2],p=0,u=[];p<l.length;p++)i=l[p],a[i]&&u.push(a[i][0]),a[i]=0;for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t]);for(d&&d(n);u.length;)u.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,n=0;n<o.length;n++){for(var r=o[n],t=!0,l=1;l<r.length;l++){var s=r[l];0!==a[s]&&(t=!1)}t&&(o.splice(n--,1),e=i(i.s=r[0]))}return e}var t={},a={0:0},o=[];function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,n,r){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)i.d(r,t,function(n){return e[n]}.bind(null,t));return r},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=n,l=l.slice();for(var c=0;c<l.length;c++)n(l[c]);var d=s;o.push([34,1]),r()}({34:function(e,n,r){"use strict";r.r(n),function(e){r(35),r(38),r(40),r(46),r(48),r(50),r(6),r(52),r(53),r(54),r(55);var n=r(1),t=r.n(n),a=r(3),o=r.n(a),i=r(18),l=r.n(i),s=r(19),c=r.n(s),d=(r(58),r(0)),p=r(9),u=r(7),f=r(20),m=r(21),g=r(22),h=r(23),v=r(24),b=r(25),y=r(26),S=r(27),x=r(28),E=r(29),D=r(30),R=r(31),C=r(32),N=r(33);l()(o.a),c()(o.a),u.c.add(f.faBars,g.faPlus,h.faMinus,m.faInfo,v.faExclamationCircle,y.faCog,b.faQuestionCircle,S.faTwitterSquare,x.faFacebookSquare,E.faGooglePlusSquare,D.faGithubSquare,R.faFlickr,C.faYoutubeSquare,N.faInstagram),u.a.searchPseudoElements=!0,u.b.watch();var w,O="./HRECOSsitesGeoJSONsubset.json",T="https://nwis.waterservices.usgs.gov/nwis/iv/?";w="https://ny.water.usgs.gov/maps/hrecos/query.php";var k,H,I,P,M,A,Y,z,j="2019-03-06",_=[],q=[{pcode:"00010",type:"Hydrologic",HRECOScode:"WTMP",NERRScode:"TEMP",desc:"Temperature, water, degrees Celsius",label:"Temperature, water",unit:"deg C",conversion:null},{pcode:"00020",type:"Meteorologic",HRECOScode:"ATMP",NERRScode:"ATEMP",desc:"Temperature, air, degrees Celsius",label:"Temperature, air",unit:"deg C",conversion:null},{pcode:"00036",type:"Meteorologic",HRECOScode:"WD",NERRScode:"WDIR",desc:"Wind direction, degrees clockwise from true north",label:"Wind direction",unit:"Deg",conversion:null},{pcode:"00045",type:"Meteorologic",HRECOScode:"RAIN",NERRScode:"CUMPRCP",desc:"Precipitation, inches",label:"Precipitation",unit:"in",conversion:null},{pcode:"00052",type:"Meteorologic",HRECOScode:"RHUM",NERRScode:"RH",desc:"Relative humidity, percent",label:"Relative Humidity",unit:"%",conversion:null},{pcode:"00065",type:"Hydrologic",HRECOScode:"DEPTH",NERRScode:"DEPTH",desc:"Gage height, feet",label:"Gage height",unit:"feet",conversion:null},{pcode:"00095",type:"Hydrologic",HRECOScode:"SPCO",NERRScode:"SPCOND",desc:"Specific conductance, water, unfiltered, microsiemens per centimeter at 25 degrees Celsius",label:"Specific conductance",unit:"uS/cm @25C",conversion:null},{pcode:"00300",type:"Hydrologic",HRECOScode:"DO",NERRScode:"DO_MGL",desc:"Dissolved oxygen, water, unfiltered, milligrams per liter",label:"Dissolved oxygen",unit:"mg/l",conversion:null},{pcode:"00301",type:"Hydrologic",HRECOScode:"DOPC",NERRScode:"DO_PCT",desc:"Dissolved oxygen, water, unfiltered, percent of saturation",label:"Dissolved oxygen",unit:"% saturatn",conversion:null},{pcode:"00400",type:"Hydrologic",HRECOScode:"PH",NERRScode:"PH",desc:"pH, water, unfiltered, field, standard units",label:"pH",unit:"std units",conversion:null},{pcode:"62620",type:"Hydrologic",HRECOScode:"ELEV",NERRScode:null,desc:"Estuary or ocean water surface elevation above NAVD 1988, feet, NAVD88",label:"Elevation",unit:"ft",conversion:3.28084},{pcode:"63680",type:"Hydrologic",HRECOScode:"TURB",NERRScode:"TURB",desc:"Turbidity, water, unfiltered, monochrome near infra-red LED light, 780-900 nm, detection angle 90 +-2.5 degrees, formazin nephelometric units (FNU)",label:"Turbidity",unit:"FNU",conversion:null},{pcode:"72254",type:"Hydrologic",HRECOScode:"VEL",NERRScode:null,desc:"Water velocity reading from field sensor, feet per second",label:"Water velocity",unit:"ft/sec",conversion:null},{pcode:"75969",type:"Meteorologic",HRECOScode:"BARO",NERRScode:"BP",desc:"Barometric pressure, not corrected to sea level, millibars",label:"Barometric pressure",unit:"mbar",conversion:null},{pcode:"72253",type:"Meteorologic",HRECOScode:"STMP",NERRScode:null,desc:"Soil temperature, degrees Celsius",label:"Soil temperature",unit:"deg C",conversion:null},{pcode:"61727",type:"Meteorologic",HRECOScode:null,NERRScode:null,desc:"Wind gust speed, knots",label:"Wind gust speed",unit:"knots",conversion:null},{pcode:"82127",type:"Meteorologic",HRECOScode:"WSPD",NERRScode:"WSPD",desc:"Wind speed, knots",label:"Wind speed",unit:"knots",conversion:null},{pcode:"90860",type:"Hydrologic",HRECOScode:"SALT",NERRScode:"SAL",desc:"Salinity, water, unfiltered, practical salinity units at 25 degrees Celsius",label:"Salinity",unit:"PSU",conversion:null},{pcode:"99989",type:"Meteorologic",HRECOScode:"PAR",NERRScode:"TotPAR",desc:"Photosynthetically active radiation (average flux density on a horizontal surface during measurement interval), micromoles of photons per square meter per second",label:"Photosynthetically Active Radiation",unit:"mmol/m2",conversion:null},{pcode:"32316",type:"Hydrologic",HRECOScode:null,NERRScode:"CHLFLUOR",desc:"Chlorophyll fluorescence measured in micrograms per Liter",label:"Chlorophyll fluorescence",unit:"ug/L",conversion:null}];function W(e){var n=new Date(e),r=""+(n.getMonth()+1),t=""+n.getDate(),a=n.getFullYear();return r.length<2&&(r="0"+r),t.length<2&&(t="0"+t),[a,r,t].join("-")}function F(e){console.log("index:",e);return["#4363d8","#f58231","#e6194b","#3cb44b","#ffe119","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#000000"][e]}function G(n){var r=[];return e(n.split(",")).each(function(n,t){e(q).each(function(e,n){t===n.pcode&&r.push(n.HRECOScode)})}),r.join(",")}function B(n){var r=[];return e(n.split(",")).each(function(n,t){e(H.features).each(function(e,n){t===n.properties["Site ID"]&&r.push(n.properties["HRECOS ID"])})}),r.join(",")}function U(e,n){var r;for(r=0;r<n.length;r++)if(n[r].text===e.text)return r;return!1}e(document).ready(function(){var n,r,a;console.log("Application Information: production version 1.0.1"),e("#appVersion").html("Application Information: production version 1.0.1"),d.Icon.Default.imagePath="./images/",k=Object(d.map)("mapDiv",{zoomControl:!1}),d.control.zoom({position:"topright"}).addTo(k),d.control.scale().addTo(k),I=Object(d.tileLayer)("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}).addTo(k),k.setView(["41.7","-73.6"],8),P=Object(d.featureGroup)().addTo(k),e.ajax({url:O,success:function(n){H=n;var r=Object(d.geoJSON)(H,{pointToLayer:function(n,r){var t="wmm-pin wmm-mutedblue wmm-icon-circle wmm-icon-white wmm-size-25";!function(n,r){var t=n.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,n){return 0===n?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,""),a=n;null===document.getElementById(t)&&e("#legend").append('<div id="'+t+'" class="card-text"><icon class="'+r+'" /><span>'+a+"</span></div>")}("HRECOS Site",t);var a=L.divIcon({className:t});return L.marker(r,{icon:a})},onEachFeature:function(n,r){var t="";e.each(n.properties,function(e,r){r.length>0&&("Site ID"===e&&-1===n.properties["Station Name"].indexOf("NERRS")?t+="<b>"+e+':</b>&nbsp;&nbsp;<a href="https://waterdata.usgs.gov/usa/nwis/uv?'+r+'" target="_blank">'+r+"</a></br>":"Partners"===e?n.properties[e].forEach(function(e,n){t+='<b>Partner :</b>&nbsp;&nbsp;<a href="'+e.url+'" target="_blank">'+e.name+"</a></br>"}):t+="<b>"+e+":</b>&nbsp;&nbsp;"+r+"</br>")}),r.bindPopup(t)}});P.addLayer(r),function(n){e(".appFilter").each(function(r,t){var a=e(t).attr("id"),o=e(t).data("selectname"),i=[];console.log("processing:",a,o),"metParameterSelect"===a&&e.each(q,function(e,n){var r={id:e,text:n.label,value:n.pcode};if("Meteorologic"===n.type){var t=U(r,i);t?i[t].value.push(n.pcode):i.push(r)}}),"hydParameterSelect"===a&&e.each(q,function(e,n){var r={id:e,text:n.label,value:[n.pcode]};if("Hydrologic"===n.type){var t=U(r,i);t?i[t].value.push(n.pcode):i.push(r)}}),"stationSelect"===a&&e.each(n.features,function(e,n){i.push({id:e,text:n.properties["Station Name"],value:n.properties["Site ID"]})}),e("#"+a).select2({placeholder:o,data:i,dropdownAutoWidth:!0}),e("#"+a).on("change",function(n){e("#"+a).select2("data")})})}(H)},complete:function(){}}),n=new Date,r=W(n),a=W(n.getTime()-6048e5),console.log("dates:",r,a),e("#startDate").val(a),e("#endDate").val(r),e(".datepicker").datepicker({format:"yyyy-mm-dd"}),e("#timePeriodSelect").select2({dropdownAutoWidth:!0,minimumResultsForSearch:-1}),e(".basemapBtn").click(function(){e(".basemapBtn").removeClass("slick-btn-selection"),e(this).addClass("slick-btn-selection"),function(e){switch(e){case"Streets":e="Streets";break;case"Satellite":e="Imagery";break;case"Clarity":e="ImageryClarity";break;case"Topo":e="Topographic";break;case"Terrain":e="Terrain";break;case"Gray":e="Gray";break;case"DarkGray":e="DarkGray";break;case"NatGeo":e="NationalGeographic"}I&&k.removeLayer(I);I=Object(p.a)(e),k.addLayer(I),M&&k.removeLayer(M);"Gray"!==e&&"DarkGray"!==e&&"Imagery"!==e&&"Terrain"!==e||(M=Object(p.a)(e+"Labels"),k.addLayer(M))}(this.id.replace("btn",""))}),e("#mobile-main-menu").click(function(){e("body").toggleClass("isOpenMenu")}),e("#resetView").click(function(){resetView()}),e("#aboutButton").click(function(){e("#aboutModal").modal("show")}),e("#showGraph").click(function(){!function(){var n;e("#graphContainer").html(""),e("#loading").show(),e("#downloadData").prop("disabled",!0),e("#toggleTooltip").prop("disabled",!0),e("#graphStatus").html(""),z=!1;var r=[],a=[];_=[];var i={format:"json"},l=e("#stationSelect").select2("data"),s=l.map(function(e){return e.value}),c=s.filter(function(e,n,r){return-1!==e.indexOf("NERRS_")}),d=s.filter(function(e,n,r){return-1===e.indexOf("NERRS_")});console.log("Site lists:",c,d);var p=l.map(function(e){return e.text}),u=e("#metParameterSelect").select2("data"),f=e("#hydParameterSelect").select2("data");if(u)var m=u.map(function(e){return e.value});if(f)var g=f.map(function(e){return console.log("HERE",e),e.value});if(0==m.length&&0==g.length)return void alert("No parameters selected");var h=m.concat(g).join(",").split(",");i.parameterCd=h.join(","),console.log("parameter code list:",h);var v=e("input[name=timeSelect]:checked").val();e("#compareYears").prop("checked")&&(z=!0);if("period"===v){var b=e("#timePeriodSelect").select2("data")[0].id;i.endDT=t()().format("YYYY-MM-DD"),i.startDT=t()().subtract(t.a.duration(b)).format("YYYY-MM-DD")}else i.startDT=e("#startDate").val(),i.endDT=e("#endDate").val();if(t()(i.endDT).diff(t()(i.startDT),"years")>2)return void alert("The maximum query range is 2 years");if(0===l.length||0===h.length)return void alert("You must choose at least one station and one parameter to continue");e("#graphModal").modal("show"),i.access="0",a.push(i),z&&((n=JSON.parse(JSON.stringify(i))).startDT=t()(i.startDT).subtract(1,"years").format("YYYY-MM-DD"),n.endDT=t()(i.endDT).subtract(1,"years").format("YYYY-MM-DD"),a.push(n));e(a).each(function(n,a){if(c.length>0){console.log("NERRS query");var o=JSON.parse(JSON.stringify(a));o.parameterCd=(i=a.parameterCd,l=[],e(i.split(",")).each(function(n,r){e(q).each(function(e,n){r===n.pcode&&l.push(n.NERRScode)})}),l.join(",")),o.sites=B(c.join(",")),o.source="NERRS",r.push(o)}var i,l;if(d.length>0){var s=d.join(",");if(a.sites=s,t()(a.startDT).isSameOrBefore(j)&&t()(a.endDT).isSameOrBefore(j)){console.log("ALL LEGACY DB QUERY");var o=JSON.parse(JSON.stringify(a));o.parameterCd=G(a.parameterCd),o.sites=B(a.sites),o.startDT=t()(o.startDT+" 00:00:00").add(5,"hours").format("YYYY-MM-DD HH:mm:ss"),o.endDT=t()(o.endDT+" 00:00:00").add(5,"hours").format("YYYY-MM-DD HH:mm:ss"),console.log("times:",o.startDT,o.endDT),o.source="legacy",r.push(o)}if(t()(a.startDT).isSameOrBefore(j)&&t()(a.endDT).isAfter(j)){console.log("QUERY SPAN DB CROSSOVER, MAKING 2 QUERIES");var o=JSON.parse(JSON.stringify(a));o.parameterCd=G(a.parameterCd),o.sites=B(a.sites),o.startDT=t()(o.startDT+" 00:00:00").add(5,"hours").format("YYYY-MM-DD HH:mm:ss"),o.endDT=t()(j+" 23:59:59").add(5,"hours").format("YYYY-MM-DD HH:mm:ss"),console.log("times:",o.startDT,o.endDT),o.source="legacy",r.push(o),a.startDT=j,r.push(a)}t()(a.startDT).isAfter(j)&&t()(a.endDT).isAfter(j)&&(console.log("REGULAR NWIS QUERY ONLY"),r.push(a))}}),A=[];var y=0;console.log("Processing",r.length,"requests");var S=[],x=!1;e(r).each(function(n,l){var s=T;"legacy"==l.source?s=w:"NERRS"==l.source&&(s=w),console.log("input Request:",s,l);var c=!1;z&&l.startDT<e("#startDate").val()&&(c=!0);var d=e.ajax({url:s,dataType:"json",data:l,type:"GET",success:function(n){var l;console.log("response:",n);var s=!1;if("legacyDB"===n.declaredType?(-1!==n.queryInfo.criteria.sql.indexOf(".NERRS")&&(s=!0,e("#graphStatus").append("<div class='alert alert-primary' role='alert' style='font-size:small;'>NERRS Site data is courtesy of NOAA's <a href='http://cdmo.baruch.sc.edu/' target='_blank'>National Estuarine Research Reserve System </a>.  All data is provisional.  Please visit the NERRS website to download data.</div>"),n.values.sort((e,n)=>e.date_time>n.date_time?1:n.date_time>e.date_time?-1:0)),l={declaredType:n.declaredType,value:{queryInfo:n.queryInfo,timeSeries:[]}},console.log("legacyDB response:",l),e(n.values).each(function(r,t){var a,o,i=!1;if(e(l.value.timeSeries).each(function(e,n){t.parameter===n.variable.variableCode[0].HRECOSvalue&&t.site_name===n.sourceInfo.siteNameHRECOS&&(i=!0)}),i)e(l.value.timeSeries).each(function(e,n){if(t.parameter===n.variable.variableCode[0].HRECOSvalue&&t.site_name===n.sourceInfo.siteNameHRECOS){var r={value:t.value,qualifiers:["P"],dateTime:t.date_time};n.values[0].value.push(r)}});else{var c=t.site_name.substring(0,6);if(-1!==n.queryInfo.criteria.sql.indexOf(".NERRS"))var c=t.site_name;var d,p=(a=c,e(H.features).each(function(e,n){a===n.properties["HRECOS ID"]&&(o=n.properties)}),o);s?("CUMPRCP"===(d=function(n){var r;return e(q).each(function(e,t){n===t.NERRScode&&(r=t)}),r}(t.parameter)).NERRScode&&(d.desc="Precipitation, cumulative daily total, inches",d.conversion=.0393701),console.log("NERRS data",d)):d=function(n){var r;return e(q).each(function(e,t){n===t.HRECOScode&&(r=t)}),r}(t.parameter),console.log("this one doesnt exist, creating new time series:",t,p,d);var u={sourceInfo:{siteNameHRECOS:t.site_name,siteName:p["Station Name"],siteCode:[{value:p["Site ID"],network:t.agency_id,agencyCode:t.agency_id}]},variable:{variableCode:[{value:d.pcode,HRECOSvalue:t.parameter,network:t.agency_id}],variableName:d.desc,variableDescription:d.desc,valueType:"",unit:{unitCode:d.unit},conversion:d.conversion},values:[{value:[{value:t.value,qualifiers:["P"],dateTime:t.date_time}],method:[{methodDescription:"[legacy]",methodID:99999}]}],name:"USGS:"+p["Site ID"]+":"+d.pcode+":00000"};l.value.timeSeries.push(u)}})):l=n,y+=1,l.value.timeSeries.length<=0){var d=p.filter(function(e){return-1===S.indexOf(e)}),u=[];e(d).each(function(e,n){u.push('<span class="badge badge-secondary">'+n+"</span>")}),"legacyDB"===l.declaredType?(y===a.length&&e("#loading").hide(),e("#graphStatus").append('<div id="hrecosAlert" class="alert alert-warning" role="alert" style="font-size:small;">Found HRECOS site(s): '+u.join("  ")+" but no data in the legacy HRECOS DB was found for parameters: ["+i.parameterCd+"]</div>")):(console.log("HERE",y,a.length),y===a.length&&e("#loading").hide(),e("#graphStatus").append('<div id="nwisAlert" class="alert alert-warning" role="alert" style="font-size:small;">Found NWIS site(s): '+u.join("  ")+" but no data was found in USGS NWIS waterservices for parameters: ["+i.parameterCd+"]</div>"))}else console.log("CHECKING:",l.value.timeSeries.length,h.length),l.value.timeSeries.length!==h.length&&e("#graphStatus").append('<div class="alert alert-warning" role="alert" style="font-size:small;">Data for one or more parameters is missing</div>');var f=t()(l.value.queryInfo.criteria.timeParam.beginDateTime).valueOf();if(e(l.value.timeSeries).each(function(n,r){console.log("siteParamCombo",r,S),-1===S.indexOf(r.sourceInfo.siteName)&&S.push(r.sourceInfo.siteName),e(r.values).each(function(a,o){if(0!==o.value.length){var i,s=o.value.map(function(e,n){var a=t()(e.dateTime).valueOf();c&&(a=t()(a).add(1,"years").valueOf());var i=e.value/1;return-1===e.qualifiers.indexOf("Mnt")&&-1===e.qualifiers.indexOf("Eqp")&&-1===e.qualifiers.indexOf("Ssn")||(i=null,x=!0),r.variable.conversion&&(i*=r.variable.conversion),"[legacy]"===o.method[0].methodDescription&&(a-=18e6),[a,i]}),d=r.variable.variableDescription;-1!==r.variable.variableDescription.indexOf("Precipitation, total, inches")&&(d="Precipitation, inches"),i=o.method[0].methodDescription.length>0?d+", "+o.method[0].methodDescription:r.variable.variableDescription;var p=r.sourceInfo.siteName+" | "+e("<div>").html(i).text();-1!==p.indexOf("[HRECOS]")?p=p.replace("[HRECOS]","[NWIS]"):-1===p.indexOf("[legacy]")&&(p+=" [NWIS]"),p.indexOf("Estuary or ocean water surface elevation above NAVD 1988, feet, NAVD88 [NWIS]")&&(p=p.replace("Estuary or ocean water surface elevation above NAVD 1988, feet, NAVD88 [NWIS]","OBSERVED: Estuary or ocean water surface elevation above NAVD 1988, feet, NAVD88 [NWIS]")),p.indexOf("Estuary or ocean water surface elevation above NAVD 1988, feet, tidal prediction, NAVD88 [NWIS]")&&(p=p.replace("Estuary or ocean water surface elevation above NAVD 1988, feet, tidal prediction, NAVD88 [NWIS]","PREDICTED: Estuary or ocean water surface elevation above NAVD 1988, feet, NAVD88 [NWIS]")),"PSS"===r.variable.unit.unitCode&&(r.variable.unit.unitCode="psu");var u,f,m={showInLegend:!0,values:o,data:s,color:F(n),siteID:r.sourceInfo.siteCode[0].value,siteName:r.sourceInfo.siteName,siteCode:r.name,variableDescription:i,variableName:r.variable.variableName,unit:r.variable.unit.unitCode,name:p};if(z)l.value.queryInfo.criteria.timeParam.beginDateTime.indexOf("T")>-1?(u=l.value.queryInfo.criteria.timeParam.beginDateTime.split("T")[0],f=l.value.queryInfo.criteria.timeParam.endDateTime.split("T")[0]):l.value.queryInfo.criteria.timeParam.beginDateTime.indexOf(" ")>-1&&(u=l.value.queryInfo.criteria.timeParam.beginDateTime.split(" ")[0],f=l.value.queryInfo.criteria.timeParam.endDateTime.split(" ")[0]),m.name=u+" to "+f+" | "+p;A.push(m)}})}),console.log("length test:",y,r.length,A.length),y===r.length&&S.length>0)if(function(n,r){console.log("In ShowGraph.  Processing this many:",r.length,r),e("#downloadData").prop("disabled",!1),e("#toggleTooltip").prop("disabled",!1),o.a.setOptions({global:{useUTC:!1},lang:{thousandsSep:","}});var t={legend:{itemStyle:{color:"#000000",fontWeight:"normal",fontSize:"14px"},itemCheckboxStyle:{width:"18px",height:"18px",position:"absolute"}},chart:{type:"line",zoomType:"xy",spacingTop:20,spacingLeft:0,spacingBottom:0},plotOptions:{series:{pointStart:n,pointInterval:9e5,gapSize:1,events:{checkboxClick:function(n){var r=this.chart;o.a.each(r.legend.allItems,function(n,t){e(n.checkbox).change(function(){this.checked?r.legend.allItems[t].show():r.legend.allItems[t].hide()})})},legendItemClick:function(){this.checkbox.checked=!this.checkbox.checked}},showCheckbox:!0,selected:!0}},title:{text:""},credits:{enabled:!1},tooltip:{shared:!0,useHTML:!0,pointFormatter:function(){var e=this.series,n="<svg width='20' height='20'>"+e.legendSymbol.element.outerHTML+"</svg>";return"<div class='tooltip-body'>"+n+e.name+": <b>"+this.y+"</b><br/></div>"}},xAxis:{type:"datetime",labels:{formatter:function(){return z?o.a.dateFormat("%m/%d",this.value):o.a.dateFormat("%m/%d/%Y",this.value)},style:{fontSize:"12px"},align:"center",tickInterval:1728e5}},yAxis:[],series:[]};e(r).each(function(n,r){var a={title:{text:r.unit,style:{color:r.color}},labels:{style:{color:r.color,fontSize:"12px"}}},o=!1;e(t.yAxis).each(function(e,n){n.title.text==r.unit&&(o=!0)}),o||t.yAxis.push(a),t.series.push(r)}),e(r).each(function(n,r){e(t.yAxis).each(function(e,n){n.title.text==r.unit&&(r.yAxis=e),n.opposite=!!(e%2)})}),e("#loading").hide(),(Y=o.a.chart("graphContainer",t)).enableTooltip=!0,e("#toggleTooltip").bind("click",function(){Y.enableTooltip=!Y.enableTooltip,Y.update({tooltip:{enabled:Y.enableTooltip}}),e(this).text(Y.enableTooltip?"Disable Tooltip":"Enable Tooltip")})}(f,A),x&&e("#graphStatus").append('<div class="alert alert-warning" role="alert" style="font-size:small;">Qualifier flags were found for the input request, some data is missing.</div>'),S.sort().join(",")===p.sort().join(","))console.log("processed site list and original site list match",y,a.length,S,p);else if(console.log("processed site list and original site list DONT match",y,a.length,S,p),e("#nwisAlert").length);else{var d=p.filter(function(e){return-1==S.indexOf(e)}),u=[];e(d).each(function(e,n){u.push('<span class="badge badge-secondary">'+n+"</span>")}),e("#graphStatus").append('<div class="alert alert-warning" role="alert" style="font-size:small;">Site(s) missing data in USGS NWIS waterservices: '+u.join("  ")+"</div>")}},error:function(n){e("#loading").hide(),console.error("Error:",n),e("#graphStatus").append('<div class="alert alert-danger" role="alert" style="font-size:small;">There was an error while requesting data from the legacy database.</div>')}});_.push(d)})}()}),e("#downloadData").click(function(){A?e(A).each(function(n,r){if(r){var a=[];a.push('Site Name,"'+r.siteName+'"'),a.push('Site ID,"'+r.siteID+'"'),a.push('Description,"'+r.variableDescription.replace("[HRECOS]","[NWIS]")+'"'),a.push(""),a.push("Time (EST),Value"),e(r.data).each(function(e,n){a.push(t()(n[0]).format("YYYY-MM-DD HH:mm:ss")+","+n[1])}),a=a.join("\n");var o=r.siteCode.replace(":","_");-1!=r.variableDescription.indexOf("[legacy]")&&(o+="_legacy"),-1!=r.variableDescription.indexOf("[HRECOS]")&&(o+="_NWIS"),function(e,n){var r=new Blob([e],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,n);else{var t=document.createElement("a"),a=URL.createObjectURL(r);void 0!==t.download?(t.setAttribute("href",a),t.setAttribute("download",n),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)):window.open(a)}}(a,o+=".csv")}else alert("No data to export")}):alert("No data to export")}),e("#graphModal").on("hidden.bs.modal",function(){console.log("Aborting all AJAX requests..."),_.forEach(function(e){e.abort()})}),e("#stationSelect").on("select2:select",function(e){!function(e){var n=e.params.data.text;console.log("station select",n),P.eachLayer(function(e){e.eachLayer(function(e){n==e.feature.properties["Station Name"]&&e.openPopup()})})}(e)})})}.call(this,r(2))},50:function(e,n,r){var t=r(51);"string"==typeof t&&(t=[[e.i,t,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(5)(t,a);t.locals&&(e.exports=t.locals)},51:function(e,n,r){(e.exports=r(4)(!1)).push([e.i,"\r\n#loading {\r\n  background: #e9e9e9;\r\n  /* position: absolute; */\r\n  height:200px;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  opacity: 0.75;\r\n}\r\n\r\n#loading .load-text {\r\n  text-align: center;\r\n  position: relative;\r\n  top: 50%;\r\n  transform: translateY(-50%); \r\n}\r\n\r\n.tooltip-body{\r\n  width: 400px;\r\n  white-space:normal;\r\n  z-index:9999 !important;\r\n}\r\n\r\n/*\r\n    ===========================\r\n    ===========================\r\n         Navigation Bar\r\n    ===========================\r\n    ===========================\r\n*/\r\n\r\n.top-menu-btn{\r\n  background-color: transparent;\r\n  border: none;\r\n  color: rgba(255,255,255,0.5);\r\n  font-weight: 400;\r\n  text-transform: uppercase;\r\n  letter-spacing: 1.5px;\r\n  font-size: 12pt;\r\n  margin: 18px auto;\r\n  float: right;\r\n}\r\n.top-menu-btn:hover{\r\n  font-size: 12pt;\r\n  background-color: transparent;\r\n  border: none;\r\n  color: rgba(255,255,255,0.8)\r\n}\r\n.top-menu-btn:focus{\r\n  background-color: transparent;\r\n  border: none;\r\n  color: rgba(255,255,255,0.8);\r\n  font-size: 12pt;\r\n}\r\n.top-menu-btn:active{\r\n  color: rgba(255,255,255,1) !important;\r\n  background-color: transparent !important;\r\n  font-size: 12pt;\r\n  border: none;\r\n}\r\n\r\n.top-menu-brand {\r\n  padding: 14px 14px 10px;\r\n}\r\n\r\n.top-menu-brand > img {\r\n  height: 40px;\r\n}\r\n\r\n.top-menu-brand.dec-logo > img {\r\n  filter: invert(100%);\r\n}\r\n\r\n.app-name{\r\n  position: relative;\r\n  top:2px;\r\n  font-weight:300;\r\n}\r\n\r\n.app-name {\r\nposition: relative;\r\nwidth: 100%;\r\nline-height: 70px;\r\npadding: 0 10px;\r\nfont-size: 23px;\r\ncolor: #ffffff;\r\nmargin: 0;\r\nz-index: 10;\r\n}\r\n\r\n.app-name-mobile{\r\n  position: relative;\r\n  top:-2px;\r\n  font-weight:300;\r\n}\r\n\r\n.app-name-mobile {\r\ndisplay: none;\r\nposition: relative;\r\nwidth: 100%;\r\nline-height: 72px;\r\npadding: 0 10px;\r\nfont-size: 30px;\r\ncolor: #ffffff;\r\nmargin: 0;\r\nz-index: 10;\r\n\r\n}\r\n\r\n\r\n/*\r\n  ===========================\r\n  ===========================\r\n       Map\r\n  ===========================\r\n  ===========================\r\n*/\r\nhtml, body, #mapDiv {\r\npadding: 0; \r\nmargin: 0;\r\nheight: 100%;\r\nfont-family: 'Lato', sans-serif;\r\n}\r\n\r\nbody {\r\npadding-top: 72px;\r\npadding-left:470px;\r\n}\r\n\r\n.leaflet-popup-content-wrapper {\r\n  border-radius: 0px;\r\n}\r\n\r\n#mapDiv > div.leaflet-control-zoom {\r\n\r\n}\r\n\r\n/*\r\n  ===========================\r\n  ===========================\r\n       Top menu\r\n  ===========================\r\n  ===========================\r\n*/\r\n\r\n#top-menu {\r\nposition: fixed;\r\ntop: 0;\r\nleft: 0;\r\nright: 0;\r\nbackground-color: #1d1d2b;\r\nz-index: 9;\r\n}\r\n\r\n#top-menu > div:not(.logo) {\r\nfloat: left;\r\n}\r\n\r\n#mobile-main-menu {\r\ndisplay: none;\r\ncursor: pointer;\r\n}\r\n\r\n#mobile-main-menu {\r\npadding: 24px 15px;\r\ncolor:white;\r\n}\r\n\r\n/************* END TOP MENU **************/\r\n\r\n\r\n\r\n/*\r\n  ===========================\r\n  ===========================\r\n       Main Menu\r\n  ===========================\r\n  ===========================\r\n*/\r\n\r\n#paramSelector > span {\r\n  margin-bottom:6px;\r\n}\r\n\r\nselect {\r\n  width:100%;\r\n}\r\n\r\n.datepicker {\r\n  border: solid #999 1px;\r\n}    \r\n\r\n#optionsPanel button {\r\n  margin-bottom:5px;\r\n  width: 100%;\r\n}\r\n\r\n#optionsPanel .card {\r\n  background-color: #ECEEF3;\r\n}\r\n\r\n.select2-selection__choice {\r\n  font-size:12px;\r\n}\r\n\r\n#legend .wmm-size-25.wmm-pin {\r\n  margin-top: 0px !important;\r\n}\r\n\r\n#legend span {\r\n  padding-left:16px;\r\n  font-size: 12px;\r\n}\r\n\r\n#layersPanel .card {\r\n  background-color: #ECEEF3;\r\n}\r\n\r\n#legend .card-text {\r\n  height: 40px;\r\n}\r\n\r\n.identification {\r\nfont-size: 14px;\r\nletter-spacing: 1.1px;\r\nbox-sizing: border-box;\r\npadding: 10px;\r\ndisplay: block;\r\ntext-align: center;\r\nopacity: .5;\r\n}\r\n\r\n#main-menu {\r\n  width: 470px;\r\n  height: calc(100% - 72px);\r\n  float: left;\r\n  /* background-color: #20202f; */\r\n  /* margin-top: 65px; */\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  transition: left .5s ease;\r\n  background-color: #ECEEF3;\r\n  min-height: 0 !important;\r\n  z-index:1001;\r\n}\r\n\r\n.menu-content{\r\n\theight:100%\r\n}\r\n.menu-content .scrollable-content{\r\n\tdisplay: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  height: 100%;\r\n}\r\n\r\n#main-menu .main-menu-container {\r\n  position: relative;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n}\r\n\r\n#main-menu-footer {\r\n\tposition: unset;\r\n  height: auto;\r\n  overflow-y: auto;\r\n\tbox-sizing:border-box;\r\n\tpadding: 0 0 10px 0;\r\n}\r\n\r\n#main-menu .sidebar-panel {\r\nbackground-color: #ECEEF3;\r\nmargin: 0 auto;\r\nborder: none;\r\n}\r\n\r\n.card-header > svg {\r\n  float: right;\r\n}\r\n\r\n.card-header:after {\r\n  font-family: 'Font Awesome 5 Free';   \r\n  content: '\\F068';\r\n  font-weight: 900;\r\n  display:none;\r\n}\r\n.card-header.collapsed:after {\r\n  font-family: \"Font Awesome 5 Free\";\r\n  content: \"\\F067\"; \r\n  font-weight: 900;\r\n  display:none;\r\n}\r\n  \r\n#main-menu .sidebar-panel .card-title {\r\nfont-size: 10pt;\r\ntext-transform: uppercase;\r\nfont-weight: 700;\r\nletter-spacing: 1px;\r\n/* text-align: right; */\r\n}\r\n#main-menu .sidebar-panel .card-header {\r\nbox-sizing: border-box;\r\ndisplay: block;\r\nwidth: 100%;\r\npadding: 15px;\r\ncolor: #6F758E;\r\nbackground-color: #ECEEF3;\r\n}\r\n#main-menu .sidebar-panel .card-header:hover {\r\ncursor: pointer;\r\nbackground-color: rgba(255, 255, 255, 0.5);\r\ncolor: #000;\r\n}\r\n\r\n#main-menu .slick-btn {\r\nborder: none;\r\noutline: none;\r\nborder-radius: 0;\r\nfont-size: 9pt;\r\ntext-transform: uppercase;\r\nletter-spacing: 1px;\r\nbox-sizing: border-box;\r\npadding: 5px;\r\ndisplay: block;\r\nwidth: 100%;\r\ntext-align: left;\r\ncolor: #6F758E;\r\nmargin: 0 auto;\r\nborder-left: 4px solid transparent;\r\n}\r\n#main-menu .slick-btn img {\r\nheight: 25px;\r\nvertical-align: middle;\r\ndisplay: inline-block;\r\nmargin: 0 15px 0 0;\r\nborder-radius: 0;\r\nborder: none;\r\n}\r\n#main-menu .slick-btn br {\r\ndisplay: none;\r\n}\r\n#main-menu .slick-btn:hover {\r\nborder-color: #333;\r\nbackground-color: rgba(236, 238, 243, 0.5);\r\n}\r\n#main-menu .slick-btn:focus {\r\nbackground-color: #ECEEF3;\r\nborder-color: #4574CC;\r\n}\r\n\r\n#main-menu .slick-btn-selection {\r\nbackground-color: rgba(117, 136, 184, 0.5);\r\nborder-color: #4574CC !important;\r\n}\r\n\r\n.footer-links {\r\n  font-weight: 300;\r\n  letter-spacing: 1.5px;\r\n  box-sizing: border-box;\r\n  padding: 10px;\r\n  display: block;\r\n  text-align: center;\r\n  opacity: .5;\r\n  padding:3px;\r\n}\r\n\r\n.footer-links a {\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  padding: 0 4px;\r\n  font-size: 8pt;  \r\n}\r\n\r\n.footer-icons {\r\n  padding: 10px;\r\n  letter-spacing: 6px;\r\n  text-align: center;\r\n  opacity: .5;\r\n}\r\n\r\n/************* END MAIN MENU **************/\r\n\r\n/************** Mobile friendly stuff *********/\r\n\r\n@media (max-width: 767px) {\r\n  #mobile-main-menu {\r\n    display: inline-block;\r\n  }\r\n\r\n  .isOpenMenu #main-menu {\r\n    left: 0;\r\n  }\r\n\r\n  .top-menu-brand {\r\n    display:none;\r\n  }\r\n\r\n  body {\r\n    padding-left:0px;\r\n  }\r\n\r\n  #main-menu {\r\n    left: -100%;\r\n    height: calc(100% - 72px);\r\n    width: 100%;\r\n  }\r\n\r\n  .app-name {\r\n    display: none;\r\n  }\r\n\r\n  .app-name-mobile {\r\n    display: inline;\r\n    font-size:medium;\r\n  }\r\n\r\n}",""])},57:function(e,n,r){var t={"./en-SG":10,"./en-SG.js":10,"./en-au":11,"./en-au.js":11,"./en-ca":12,"./en-ca.js":12,"./en-gb":13,"./en-gb.js":13,"./en-ie":14,"./en-ie.js":14,"./en-il":15,"./en-il.js":15,"./en-nz":16,"./en-nz.js":16};function a(e){var n=o(e);return r(n)}function o(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}a.keys=function(){return Object.keys(t)},a.resolve=o,e.exports=a,a.id=57}});